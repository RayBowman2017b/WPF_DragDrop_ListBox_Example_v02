<Window x:Class="Reorder_item_WPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" 
         xmlns:dd="clr-namespace:GongSolutions.Wpf.DragDrop;assembly=GongSolutions.Wpf.DragDrop">


    <ScrollViewer Name="ScrollVwr_for_main_content"
                    Height="Auto"
                    HorizontalScrollBarVisibility="Auto"
                    VerticalScrollBarVisibility="Auto"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Padding="4"
                    BorderBrush="Black"
                    BorderThickness="2"
                    Background="DarkGreen" >
        
    <Grid>

        <Grid.RowDefinitions>
            <RowDefinition Height="44" />
            <!--
                Scintilla text editor panel neither contracts nor expands
                When Height is set to "Auto".
              -->
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="176" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>


        <!--
              Width="300" Margin="0,0,5,0"
              Width="Auto"
                 Width="{Binding ElementName=ScrollVwr_for_main_content, Path=ViewportWidth}"
                 Height="{Binding ElementName=ScrollVwr_for_file_buttons, Path=Height}"

          -->
        <ListBox SelectionMode="Extended"
                 ItemsSource="{Binding MSPCollection}"
                 dd:DragDrop.IsDragSource="True"
                 Width="{Binding ElementName=ScrollVwr_for_main_content, Path=ViewportWidth}"
                 Height="222"
                 Margin="4"
                 Grid.Row="1"
                 dd:DragDrop.IsDropTarget="True">

            <!--<ListBox.ItemsPanel>-->
            <ListBox.ItemTemplate>
                <DataTemplate>

            <!--
                    Height="222"
                    Height="Auto"
              -->
            <ScrollViewer Background="#FF270627" Name="ScrollVwr_for_file_buttons"

                    Margin="4,4,4,4"
                    Height="111"
                    Width="Auto"
                    BorderThickness="2"
                    BorderBrush="Black"
                    HorizontalScrollBarVisibility="Disabled"
                    VerticalScrollBarVisibility="Auto"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    GotFocus="ScrollVwr_for_main_content_GotFocus">
                    <!--
                    Height="222"
                    Height="Auto"
                    Width="{Binding ElementName=ScrollVwr_for_file_buttons, Path=ViewportWidth}"
                      -->
                <WrapPanel Name="wrappanel_file_buttons"
                    Width="Auto"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Height="222"
                    Background="BlueViolet">

                 <!--
                    Height="Auto"
                   -->
                            <TextBlock Text="{Binding Name}" Foreground="White"
                                   Background="#2ba3d5" Height="50" Width="180"
                                   HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="18"/>

                    <!-- <Grid Background="#2ba3d5" Height="50" Width="280">
                        <TextBlock Text="{Binding Name}" Foreground="White"
                                   HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="40"/>
                    </Grid> -->

            </WrapPanel>
            </ScrollViewer>
                </DataTemplate>
            </ListBox.ItemTemplate>
            <!--</ListBox.ItemsPanel>-->

        </ListBox>
            <!--</ScrollViewer>-->
    </Grid>
    </ScrollViewer>
</Window>
